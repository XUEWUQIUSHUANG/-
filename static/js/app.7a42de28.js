(function(){var t={6467:function(t,e,a){"use strict";var i=a(6848),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("MainHeader"),e("BackTop")],1)},r=[],o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"header"},[e("router-link",{attrs:{to:"/TableEcharts"}},[e("span",[t._v("仪表盘")])]),e("router-link",{attrs:{to:"/VideoPlayback"}},[e("span",[t._v("视频回放")])])],1),e("div",{staticClass:"view"},[e("router-view")],1)])},s=[],l={},d=l,c=a(1656),p=(0,c.A)(d,o,s,!1,null,"7fab0030",null),u=p.exports,h=function(){var t=this,e=t._self._c;return t.btnFlag?e("span",{staticClass:"glyphicon glyphicon-arrow-up",on:{click:t.backTop}}):t._e()},m=[],y={data(){return{btnFlag:!1}},methods:{backTop(){const t=this;let e=setInterval((()=>{let a=Math.floor(-t.scrollTop/5);document.documentElement.scrollTop=document.body.scrollTop=t.scrollTop+a,0===t.scrollTop&&clearInterval(e)}),16)},scrollToTop(){const t=this;let e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;t.scrollTop=e,t.scrollTop>60?t.btnFlag=!0:t.btnFlag=!1}},mounted(){window.addEventListener("scroll",this.scrollToTop)},destroyed(){window.removeEventListener("scroll",this.scrollToTop)}},v=y,f=(0,c.A)(v,h,m,!1,null,"5bf118e8",null),g=f.exports,x={name:"App",components:{MainHeader:u,BackTop:g}},b=x,_=(0,c.A)(b,n,r,!1,null,null,null),A=_.exports,w=a(5090),C=a(6178),T=function(){var t=this,e=t._self._c;return e("div")},E=[],P={data(){return{}},methods:{},beforeDestroy(){},watch:{},computed:{}},k=P,I=(0,c.A)(k,T,E,!1,null,null,null),D=I.exports,M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"root"},[t._m(0),e("div",{staticClass:"line_2"},[e("div",{staticClass:"state"},[t._v("当前水泵状态："+t._s(t.beng?"打开":"关闭"))]),t._m(1)])])},O=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"line_1"},[e("div",{staticClass:"temperature",staticStyle:{width:"600px",height:"400px"},attrs:{id:"temperature"}}),e("div",{staticClass:"co2",staticStyle:{width:"600px",height:"400px"},attrs:{id:"co2"}}),e("div",{staticClass:"light",staticStyle:{width:"600px",height:"400px"},attrs:{id:"light"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"line_3"},[e("div",{staticClass:"wet",staticStyle:{width:"1000px",height:"400px"},attrs:{id:"wet"}}),e("div",{staticClass:"ph",staticStyle:{width:"1000px",height:"400px"},attrs:{id:"ph"}})])}],S=a(8355),H={data(){return{timer:"",temperatureData:[],phData:[],co2Data:[],lightData:[],wetData:[],date:[],beng:!1}},mounted(){this.getCollecter(),this.getController()},created(){this.timer=window.setInterval((()=>{this.getCollecter(),this.getController()}),1e4)},beforeDestroy(){clearInterval(this.timer)},methods:{getController(){S.A.get("http://127.0.0.1:3000/api/controller").then((t=>{this.lightData=Array.from(t.data.data,(t=>t.LIGHT_RATIO)),this.co2Data=Array.from(t.data.data,(t=>t.CO2)),this.beng=t.data.data[t.data.data.length-1].PUMP_STATUS})).then((()=>{this.lightEcharts(),this.co2Echarts()}))},getCollecter(){S.A.get("http://127.0.0.1:3000/api/collecter").then((t=>{this.temperatureData=Array.from(t.data.data,(t=>t.TEMPERATURE)),this.phData=Array.from(t.data.data,(t=>t.PH)),this.wetData=Array.from(t.data.data,(t=>t.HUMIDITY)),this.date=Array.from(t.data.data,(t=>t.TIME))})).then((()=>{this.temperatureEcharts(),this.phEcharts(),this.wetEcharts()}))},temperatureEcharts(){var t,e=document.getElementById("temperature"),a=this.$echarts.init(e);t={title:{text:"温度"},tooltip:{trigger:"axis"},legend:{},textStyle:{color:"black",fontWeight:700},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.date},yAxis:{type:"value",axisLabel:{formatter:"{value} °C"}},series:[{name:"温度",type:"line",data:this.temperatureData,markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},markLine:{data:[{type:"average",name:"Avg"}]}}],color:["#E6A23C"]},t&&a.setOption(t)},co2Echarts(){var t,e=document.getElementById("co2"),a=this.$echarts.init(e);t={title:{text:""},tooltip:{trigger:"axis"},legend:{},textStyle:{color:"black",fontWeight:700},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.date},yAxis:{type:"value",axisLabel:{formatter:"{value} ppm"}},series:[{name:"二氧化碳",type:"line",data:this.co2Data,markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},markLine:{data:[{type:"average",name:"Avg"}]}}],color:["#909399"]},t&&a.setOption(t)},lightEcharts(){var t,e=document.getElementById("light"),a=this.$echarts.init(e);t={title:{text:""},tooltip:{trigger:"axis"},legend:{},textStyle:{color:"black",fontWeight:700},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.date},yAxis:{type:"value",axisLabel:{formatter:"{value} "}},series:[{name:"光照强度",type:"line",data:this.lightData,markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},markLine:{data:[{type:"average",name:"Avg"}]}}],color:["#F56C6C"]},t&&a.setOption(t)},phEcharts(){var t,e=document.getElementById("ph"),a=this.$echarts.init(e);t={title:{text:"PH"},tooltip:{trigger:"axis"},legend:{},textStyle:{color:"black",fontWeight:700},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.date},yAxis:{type:"value",axisLabel:{formatter:"{value} PH"}},series:[{name:"PH",type:"line",data:this.phData,markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},markLine:{data:[{type:"average",name:"Avg"}]}}],color:["#67C23A"]},t&&a.setOption(t)},wetEcharts(){var t,e=document.getElementById("wet"),a=this.$echarts.init(e);t={title:{text:""},tooltip:{trigger:"axis"},legend:{},textStyle:{color:"black",fontWeight:700},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:this.date},yAxis:{type:"value",axisLabel:{formatter:"{value} %"}},series:[{name:"湿度",type:"line",data:this.wetData,markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},markLine:{data:[{type:"average",name:"Avg"}]}}],color:["#409EFF"]},t&&a.setOption(t)}}},L=H,R=(0,c.A)(L,M,O,!1,null,null,null),V=R.exports,j=function(){var t=this,e=t._self._c;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isPlay,expression:"isPlay"}],staticClass:"video"},[e("video",{staticClass:"video-js",attrs:{id:"playerId"}},[e("source",{attrs:{src:t.playing_video.CAMERA_VIDEO,type:"video/mp4"}})]),e("div",{staticClass:"state_1"},[e("span",{staticClass:"temperature"},[t._v("视频当前  温度："+t._s(t.playing_video.TEMPERATURE)+"°C    ")]),e("span",{staticClass:"wet"},[t._v("湿度："+t._s(t.playing_video.HUMIDITY)+"%    ")]),e("span",{staticClass:"ph"},[t._v("PH: "+t._s(t.playing_video.PH)+"PH    ")])])]),e("div",{staticClass:"video-list"},t._l(t.videoList,(function(a){return e("div",{key:a.id,staticClass:"video-item",on:{click:function(e){return t.play(a)}}},[e("img",{attrs:{src:a.CAMERA_PIC,alt:""}}),e("div",{staticClass:"state_2"},[e("span",{staticClass:"temperature"},[t._v("温度："+t._s(a.TEMPERATURE)+"°C  ")]),e("span",{staticClass:"wet"},[t._v("湿度："+t._s(a.HUMIDITY)+"%  ")]),e("span",{staticClass:"ph"},[t._v("PH: "+t._s(a.PH)+"PH")])]),t._m(0,!0)])})),0)])},F=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon"},[e("i",{staticClass:"el-icon-video-play"})])}],B=a(4348),U={data(){return{isPlay:!1,player:null,videoList:[],playing_video:{}}},mounted(){this.getVideo()},created(){this.timer=window.setInterval((()=>{this.getVideo()}),6e4)},beforeDestroy(){clearInterval(this.timer),this.player&&this.player.dispose()},methods:{init_videoJs(t){let e=this;e.player=this.videojs("playerId",{playbackRates:[.5,1,1.5,2],language:"zh-CN",controls:!0,autoplay:!0,preload:!1,fluid:!0,loop:!1,muted:!1,poster:t,suppressNotSupportedError:!1,controlBar:{currentTimeDisplay:!0,timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,playbackRateMenuButton:!0,volumePanel:{inline:!1},children:[{name:"playToggle"},{name:"currentTimeDisplay"},{name:"progressControl"},{name:"durationDisplay"},{name:"playbackRateMenuButton",playbackRates:[.5,1,1.5,2,2.5]},{name:"volumePanel",inline:!1},{name:"FullscreenToggle"}]}},(function(){this.on("play",(()=>{})),this.on("pause",(()=>{})),this.on("ended",(()=>{})),B.log("onPlayerReady",this)}))},getVideo(){S.A.get("http://127.0.0.1:3000/api/video").then((t=>{this.videoList=t.data.data}))},play(t){this.playing_video=t,this.isPlay||(this.isPlay=!0),this.init_videoJs(t.CAMERA_PIC)}}},$=U,G=(0,c.A)($,j,F,!1,null,null,null),W=G.exports;const Z=new C.Ay({routes:[{name:"DataForm",path:"/DataForm",component:D},{name:"TableEcharts",path:"/TableEcharts",component:V},{name:"VideoPlayback",path:"/VideoPlayback",component:W},{path:"/",redirect:"/TableEcharts"}]});var Y=Z,N=a(9143),J=a.n(N),z=a(3055);i["default"].prototype.$echarts=w,i["default"].config.productionTip=!1,i["default"].prototype.videojs=z.A,i["default"].use(C.Ay),i["default"].use(J()),new i["default"]({render:t=>t(A),router:Y}).$mount("#app")},542:function(){}},e={};function a(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,i,n,r){if(!i){var o=1/0;for(c=0;c<t.length;c++){i=t[c][0],n=t[c][1],r=t[c][2];for(var s=!0,l=0;l<i.length;l++)(!1&r||o>=r)&&Object.keys(a.O).every((function(t){return a.O[t](i[l])}))?i.splice(l--,1):(s=!1,r<o&&(o=r));if(s){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,n,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,r,o=i[0],s=i[1],l=i[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(l)var c=l(a)}for(e&&e(i);d<o.length;d++)r=o[d],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(c)},i=self["webpackChunkfarmer"]=self["webpackChunkfarmer"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504],(function(){return a(6467)}));i=a.O(i)})();
//# sourceMappingURL=app.7a42de28.js.map